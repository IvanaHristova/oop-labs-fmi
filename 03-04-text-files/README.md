# –§–∞–π–ª–æ–≤–µ

## –ü–ª–∞–Ω:
1. [–í—ä–≤–µ–¥–µ–Ω–∏–µ](#–≤—ä–≤–µ–¥–µ–Ω–∏–µ)
2. [–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–≤–µ](#—Ä–∞–±–æ—Ç–∞-—Å-—Ñ–∞–π–ª–æ–≤–µ)
3. [–ó–∞–¥–∞—á–∏](#–∑–∞–¥–∞—á–∏)

## –í—ä–≤–µ–¥–µ–Ω–∏–µ
**–ü–æ—Ç–æ–∫**: –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –∑–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ—Å—Ç –æ—Ç –¥–∞–Ω–Ω–∏.

### –ô–µ—Ä–∞—Ä—Ö–∏—è –Ω–∞ –ø–æ—Ç–æ—Ü–∏—Ç–µ –≤ C++
&nbsp;
![Hierarchy of C++ stream classes](../img/03-01-stream-hierarchy.png)

## –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–≤–µ
–ó–∞ –¥–∞ —Ä–∞–±–æ—Ç–∏–º —Å —Ñ–∞–π–ª–æ–≤–∏ –ø–æ—Ç–æ—Ü–∏, —Ç—Ä—è–±–≤–∞ –¥–∞ –≤–∫–ª—é—á–∏–º —Ö–µ–¥—ä—Ä–∞ `fstream`:
```cpp
#include <fstream>
```

### –ü–∏—Å–∞–Ω–µ –≤—ä–≤ —Ñ–∞–π–ª:
```cpp
std::ofstream of_stream;
of_stream.open("filename.txt");

// check successful open
if (!of_stream.is_open())
{
    // handle error
}

of_stream << "I like files\n";
of_stream << "a lot\n";
of_stream << 512;

of_stream.close();
```

### –ß–µ—Ç–µ–Ω–µ –æ—Ç —Ñ–∞–π–ª:
```cpp
std::ifstream if_stream;
if_stream.open("filename.txt");

// check successful open
if (!if_stream.is_open())
{
    // handle error
}

const int buffer_size = 1024;
char line[buffer_size];
while (if_stream.getline(line, buffer_size))
{
    std::cout << line << "\n";
}

if_stream.close();
```

### –†–µ–∂–∏–º –Ω–∞ –æ—Ç–≤–∞—Ä—è–Ω–µ
–ü—Ä–∏ –æ—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ —Ñ–∞–π–ª, –º–æ–∂–µ–º –¥–∞ –∏–∑–±–µ—Ä–µ–º **mode** (—Ä–µ–∂–∏–º) –Ω–∞ —Ä–∞–±–æ—Ç–∞, –∫–æ–º–±–∏–Ω–∏—Ä–∞–π–∫–∏ —Å–ª–µ–¥–Ω–∏—Ç–µ —Ñ–ª–∞–≥–æ–≤–µ:

| –§–ª–∞–≥        | –ó–Ω–∞—á–µ–Ω–∏–µ                                                                               |
| --- | --- |
| **`ios::in`**     | –û—Ç–≤–∞—Ä—è–Ω–µ —Å –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ –≤—Ö–æ–¥                                                            |
| **`ios::out`**    | –û—Ç–≤–∞—Ä—è–Ω–µ —Å –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ –∏–∑—Ö–æ–¥                                                           |
| **`ios::binary`** | –û—Ç–≤–∞—Ä—è–Ω–µ –≤ –¥–≤–æ–∏—á–µ–Ω —Ä–µ–∂–∏–º                                                               |
| **`ios::ate`**    | **–ü—ä—Ä–≤–æ–Ω–∞—á–∞–ª–Ω–æ** –ø–æ—Å—Ç–∞–≤—è –ø–æ–∑–∏—Ü–∏—è—Ç–∞ –Ω–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è –∫—Ä–∞—è –Ω–∞ —Ñ–∞–π–ª–∞                                                    |
| **`ios::app`**    | **–í—Å–∏—á–∫–∏** –∏–∑—Ö–æ–¥–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–µ –∏–∑–≤—ä—Ä—à–≤–∞—Ç –Ω–∞ –∫—Ä–∞—è –Ω–∞ —Ñ–∞–π–ª–∞, –¥–æ–±–∞–≤—è–π–∫–∏ –∫—ä–º –¥–æ—Å–µ–≥–∞—à–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏ |
| **`ios::trunc`**  | –ü—Ä–∏ –æ—Ç–≤–∞—Ä—è–Ω–µ –∑–∞ –∏–∑—Ö–æ–¥–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â —Ñ–∞–π–ª ‚Äì –¥–æ—Å–µ–≥–∞—à–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏ —Å–µ –∏–∑—Ç—Ä–∏–≤–∞—Ç   |

–§–ª–∞–≥–æ–≤–µ—Ç–µ —Å–µ –∫–æ–º–±–∏–Ω–∏—Ä–∞—Ç —Å –ø–æ–±–∏—Ç–æ–≤–æ OR –∏ —Å–µ –¥–∞–≤–∞—Ç –∫–∞—Ç–æ –≤—Ç–æ—Ä–∏ –∞—Ä–≥—É–º–µ–Ω—Ç –Ω–∞ `open()`.

üî¥ –í–∞–∂–Ω–æ
- `ios::in` —Ñ–ª–∞–≥—ä—Ç –µ –≤–∏–Ω–∞–≥–∏ –≤–¥–∏–≥–Ω–∞—Ç –ø—Ä–∏ –æ—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ –ø–æ—Ç–æ–∫ –∑–∞ –≤—Ö–æ–¥
- `ios::out` —Ñ–ª–∞–≥—ä—Ç –µ –≤–∏–Ω–∞–≥–∏ –≤–¥–∏–≥–Ω–∞—Ç –ø—Ä–∏ –æ—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ –ø–æ—Ç–æ–∫ –∑–∞ –∏–∑—Ö–æ–¥

#### –ü—Ä–∏–º–µ—Ä–∏:
```cpp
// ios::out –≤–∏–Ω–∞–≥–∏ –µ –≤–¥–∏–≥–Ω–∞—Ç
of_stream.open(file_name);

// –µ–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –Ω–∞ –ø—ä—Ä–≤–∏—è open()
of_stream.open(file_name, std::ios::out);

// –æ—Ç–≤–∞—Ä—è–Ω–µ –≤ –¥–≤–æ–∏—á–µ–Ω —Ä–µ–∂–∏–º –Ω–∞ –∏–∑—Ö–æ–¥–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏,
// –ø–æ—Å—Ç–∞–≤—è–π–∫–∏ —É–∫–∞–∑–∞—Ç–µ–ª—è –≤ –∫—Ä–∞—è –Ω–∞ —Ñ–∞–π–ª–∞
of_stream.open(file_name, std::ios::binary | std::ios::ate);

// –æ—Ç–≤–∞—Ä—è–Ω–µ —Å –∏–∑—Ö–æ–¥–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∏–∑—Ç—Ä–∏–≤–∞–π–∫–∏
// —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –Ω–∞ —Ñ–∞–π–ª–∞
of_stream.open(file_name, std::ios::trunc);
```

### –°—ä—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –ø–æ—Ç–æ–∫–∞
–ü–æ–¥–æ–±–Ω–æ –Ω–∞ —Ñ–ª–∞–ª–≥–æ–≤–µ—Ç–µ –∑–∞ —Ä–µ–∂–∏–º –Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª, –º–æ–∂–µ–º –¥–∞ —Ä–∞–∑–±–µ—Ä–µ–º —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –Ω–∞ –ø–æ—Ç–æ–∫–∞ —á—Ä–µ–∑ —Ñ–ª–∞–≥–æ–≤–µ—Ç–µ:

| –§–ª–∞–≥ | –ó–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- |
| **`ios::eofbit`** | –î–æ—Å—Ç–∏–≥–Ω–∞—Ç –µ –∫—Ä–∞—è—Ç –Ω–∞ —Ñ–∞–π–ª–∞ |
| **`ios::failbit`** | –õ–æ–≥–∏—á–µ—Å–∫–∞ –≥—Ä–µ—à–∫–∞ |
| **`ios::badbit`** | –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —á–µ—Ç–µ–Ω–µ/–ø–∏—Å–∞–Ω–µ, –∫–æ—è—Ç–æ –µ –Ω–∞–≤—Ä–µ–¥–∏–ª–∞ –Ω–∞ –ø–æ—Ç–æ–∫–∞ |
| **`ios::goodbit`** | –ù—è–º–∞ –≥—Ä–µ—à–∫–∏ |

&nbsp;
### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è –∑–∞ —á–µ—Ç–µ–Ω–µ/–ø–∏—Å–∞–Ω–µ
- [`tellg()`](http://www.cplusplus.com/reference/istream/istream/tellg/) ‚Äì –≤—Ä—ä—â–∞ —Ç–µ–∫—É—â–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è –Ω–∞ `get` —É–∫–∞–∑–∞—Ç–µ–ª—è
- [`tellp()`](http://www.cplusplus.com/reference/ostream/ostream/tellp/) ‚Äì –≤—Ä—ä—â–∞ —Ç–µ–∫—É—â–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è –Ω–∞ `put` —É–∫–∞–∑–∞—Ç–µ–ª—è
- [`seekg()`](https://www.cplusplus.com/reference/istream/istream/seekg/) ‚Äì –ø—Ä–æ–º–µ–Ω—è —Ç–µ–∫—É—â–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è –Ω–∞ `get` —É–∫–∞–∑–∞—Ç–µ–ª—è
- [`seekp()`](https://www.cplusplus.com/reference/ostream/ostream/seekp/) ‚Äì –ø—Ä–æ–º–µ–Ω—è —Ç–µ–∫—É—â–∞—Ç–∞ –ø–æ–∑–∏—Ü–∏—è –Ω–∞ `put` —É–∫–∞–∑–∞—Ç–µ–ª—è

## –ó–∞–¥–∞—á–∏
**–ó–∞–¥. 1.** –î–∞ —Å–µ –Ω–∞–º–µ—Ä–∏ –≥–æ–ª–µ–º–∏–Ω–∞—Ç–∞ –Ω–∞ —Ñ–∞–π–ª.

**–ó–∞–¥. 2.** –î–∞ —Å–µ –Ω–∞–ø–∏—à–µ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—è—Ç–æ –ø–æ –ø–æ–¥–∞–¥–µ–Ω —Ñ–∞–π–ª, —Å—ä–∑–¥–∞–≤–∞ –Ω–æ–≤ —Ñ–∞–π–ª —Å –∏–º–µ "corrected", –∑–∞–º–µ—Å—Ç–≤–∞–π–∫–∏ –≤—Å–∏—á–∫–∏ —Å—Ä–µ—â–∞–Ω–∏—è –Ω–∞ –¥–∞–¥–µ–Ω–∞ –¥—É–º–∞ —Å –¥—Ä—É–≥–∞.

**–ó–∞–¥. 3.** –ë–ª–∏–∑—ä–∫ –í–∏ –º–æ–ª–∏ –¥–∞ –ø–æ–º–æ–≥–Ω–µ—Ç–µ —Å –±–∏–∑–Ω–µ—Å–∞ –º—É, —Å—ä—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω –æ–∫–æ–ª–æ –ø—Ä–æ–¥–∞–∂–±–∞—Ç–∞ –Ω–∞ –º–∞—Ä–∞—Ç–æ–Ω–∫–∏.

–í–∞—à–∞—Ç–∞ –∑–∞–¥–∞—á–∞ –µ –¥–∞ —Å—ä–∑–¥–∞–¥–µ—Ç–µ –ø—Ä–æ—Å—Ç–∞ –±–∞–∑–∞ –æ—Ç –¥–∞–Ω–Ω–∏.
–î–∞–Ω–Ω–∏—Ç–µ, –∫–æ–∏—Ç–æ –Ω–∏ –∏–Ω—Ç–µ—Ä–µ—Å—É–≤–∞—Ç –∑–∞ –µ–¥–Ω–∏ –º–∞—Ä–∞—Ç–æ–Ω–∫–∏, —Å–∞:
- –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª
- –º–æ–¥–µ–ª
- —Ü–µ–Ω–∞
- —Å—Ä–µ–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥ [1 ‚Äì 10]

–í—Å–µ–∫–∏ –º–æ–¥–µ–ª –∏–º–∞ –∏–∑–≤–µ—Å—Ç–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∏—Ñ—Ç–æ–≤–µ, –∫–æ–∏—Ç–æ —Å–∞ –Ω–∞–ª–∏—á–Ω–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–∞.

–î–∞ —Å–µ —Ä–µ–∞–ª–∏–∑–∏—Ä–∞—Ç —Å–ª–µ–¥–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ –Ω–æ–≤ –º–æ–¥–µ–ª –º–∞—Ä–∞—Ç–æ–Ω–∫–∏ —Å –Ω–∞—á–∞–ª–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- –∫—É–ø—É–≤–∞–Ω–µ –Ω–∞ —á–∏—Ñ—Ç –æ—Ç –¥–∞–¥–µ–Ω –º–æ–¥–µ–ª
- –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç –¥–∞–¥–µ–Ω –º–æ–¥–µ–ª
- –æ—Ü–µ–Ω—è–≤–∞–Ω–µ –Ω–∞ –¥–∞–¥–µ–Ω –º–æ–¥–µ–ª
- —Å–æ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –º–æ–¥–µ–ª–∏—Ç–µ –ø–æ:
  - —Å—Ä–µ–¥–µ–Ω —Ä–µ–π—Ç–∏–Ω–≥
  - –±—Ä–æ–π –ø—Ä–æ–¥–∞–¥–µ–Ω–∏
- –ø—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –¥–∞–¥–µ–Ω –º–æ–¥–µ–ª

